<!DOCTYPE html>
<html>
<head>
<title>Admin Panel</title>

<script>
if(localStorage.getItem("login")!=="yes"){
  window.location="login.html";
}
</script>

<style>
body{
  font-family:Arial;
  padding:30px;
  background:#f4f6f9;
}

table{
  width:100%;
  border-collapse:collapse;
  background:white;
}

th,td{
  padding:12px;
  border-bottom:1px solid #ddd;
  text-align:center;
}

th{
  background:#667eea;
  color:white;
}

button{
  padding:6px 12px;
  background:red;
  color:white;
  border:none;
  cursor:pointer;
}
</style>
</head>

<body>

<h2>Admin Panel</h2>

<button onclick="logout()">Logout</button>

<table>
<tr>
<th>Name</th>
<th>Date</th>
<th>Service</th>
<th>Action</th>
</tr>
<tbody id="list"></tbody>
</table>

<script>
function logout(){
  localStorage.removeItem("login");
  window.location="login.html";
}

async function load(){
  const res=await fetch("http://localhost:5000/bookings");
  const data=await res.json();

  list.innerHTML="";

  data.forEach(b=>{
    list.innerHTML+=`
      <tr>
        <td>${b.name}</td>
        <td>${b.date}</td>
        <td>${b.service}</td>
        <td>
          <button onclick="del(${b.id})">Delete</button>
        </td>
      </tr>`;
  });
}

async function del(id){
  await fetch(`http://localhost:5000/bookings/${id}`,{
    method:"DELETE"
  });
  load();
}

load();
</script>

</body>
</html>
